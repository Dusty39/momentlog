<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.gstatic.com https://apis.google.com https://accounts.google.com https://api.deezer.com https://open.spotify.com https://sdk.scdn.co; connect-src 'self' https://*.googleapis.com https://api.cloudinary.com https://open.spotify.com https://api.deezer.com https://api.spotify.com https://nominatim.openstreetmap.org; img-src 'self' data: https://*.cloudinary.com https://*.googleusercontent.com https://i.scdn.co https://e-cdns-images.dzcdn.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; media-src 'self' https://*.cloudinary.com https://p.scdn.co https://*.dzcdn.net https://*.scdn.co;">
    <title>momentLog</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css?refresh=255">
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#09090b">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>

<body>
    <!-- Loading Splash Screen -->
    <div id="loadingSplash" class="loading-splash">
        <div class="splash-content">
            <h1>momentLog</h1>
        </div>
    </div>

    <!-- Login Overlay -->
    <div id="loginOverlay" class="login-overlay">
        <div class="login-content">
            <h1>momentLog</h1>
            <p>AnÄ±larÄ±nÄ± kaydet, paylaÅŸ, keÅŸfet.</p>
            <button id="googleLoginBtn" class="google-login-btn">
                <svg viewBox="0 0 24 24" width="20" height="20" style="margin-right: 10px;">
                    <path fill="#4285F4"
                        d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                    <path fill="#34A853"
                        d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                    <path fill="#FBBC05"
                        d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                    <path fill="#EA4335"
                        d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                </svg>
                <span>Google ile GiriÅŸ Yap</span>
            </button>
            <button id="loginDownloadBtn" class="download-apk-btn">
                ğŸ“² UygulamayÄ± Ä°ndir (.apk)
            </button>
            <div class="login-footer">
                GizliliÄŸinize saygÄ± duyuyoruz. <span>Verileriniz gÃ¼vende.</span>
            </div>
            <div class="login-credits">
                <p>Created by Serhat AykÄ±ÅŸ</p>
                <p>Â© 2025 momentLog. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
            </div>
        </div>
    </div>

    <div id="app" class="hidden">
        <header>
            <!-- Logo Row - Centered -->
            <div class="header-logo">
                <h1 class="main-title">momentLog</h1>
            </div>

            <!-- Menu Row - Centered -->
            <div class="header-menu">
                <!-- AkÄ±ÅŸ (Home) -->
                <button id="homeBtn" class="icon-btn active" title="AkÄ±ÅŸ">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                </button>

                <!-- KeÅŸfet -->
                <button id="exploreBtn" class="icon-btn" title="KeÅŸfet">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>
                    </svg>
                </button>

                <!-- AnÄ± Ekle -->
                <button id="headerAddBtn" class="icon-btn add-moment-btn" title="AnÄ± Yaz">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                </button>

                <!-- Bildirimler -->
                <button id="notificationsBtn" class="icon-btn notification-btn" title="Bildirimler">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span class="notification-badge hidden" id="notifBadge">0</span>
                </button>

                <!-- Profil -->
                <button class="icon-btn profile-btn" id="profileBtn" title="Profilim">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </button>

                <!-- UygulamayÄ± Ä°ndir (Mobile/PWA) -->
                <button id="installBtn" class="icon-btn install-btn hidden" title="UygulamayÄ± YÃ¼kle">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                </button>

            </div>
        </header>

        <main>
            <!-- Input Section (Write Mode) -->
            <div class="input-section hidden-mode">
                <textarea id="momentInput" placeholder="BugÃ¼n ne oldu? Bir anÄ± bÄ±rak..." rows="3"></textarea>
                <div class="media-preview" id="mediaPreview"></div>

                <div class="input-toolbar">
                    <div class="tool-group">
                        <!-- FotoÄŸraf -->
                        <label class="tool-btn" title="FotoÄŸraf Ekle">
                            <input type="file" id="photoInput" accept="image/*" multiple hidden>
                            ğŸ“·
                        </label>

                        <!-- Ses KaydÄ± -->
                        <button id="recordBtn" class="tool-btn" title="Ses KaydÄ±">ğŸ¤</button>
                        <span id="recordingTimer" class="recording-timer hidden">00:00</span>

                        <!-- Konum -->
                        <button id="addLocationBtn" class="tool-btn" title="GerÃ§ek Konum Ekle">ğŸ“</button>

                        <!-- Tarih -->
                        <button id="dateBtn" class="tool-btn" title="Tarih SeÃ§"
                            onclick="document.getElementById('momentDate').showPicker()">ğŸ“…</button>
                        <input type="date" id="momentDate" max=""
                            style="position:absolute;visibility:hidden;width:0;height:0;">

                        <!-- ÅarkÄ± Ekle -->
                        <button id="musicBtn" class="tool-btn" title="ÅarkÄ± SeÃ§">ğŸµ</button>


                        <!-- Koleksiyon -->
                        <button id="collectionBtn" class="tool-btn" title="Koleksiyon SeÃ§">ğŸ“</button>

                        <!-- GÃ¶rÃ¼nÃ¼rlÃ¼k -->
                        <button id="visibilityToggle" class="tool-btn" title="GÃ¶rÃ¼nÃ¼rlÃ¼k: Sadece Ben">
                            <span id="privateIcon">ğŸ”’</span>
                            <span id="visibleIcon" class="hidden">ğŸŒ</span>
                        </button>
                    </div>

                    <div class="input-actions">
                        <div class="location-input-wrapper">
                            <div class="sticker-input-container">
                                <input type="text" id="stickerInput" placeholder="ManÅŸet (Ã–rn: Harika Bir GÃ¼n)"
                                    maxlength="30" class="sticker-input" autocomplete="off">
                                <button id="themeBtn" class="inline-theme-btn" title="Tema SeÃ§"
                                    onclick="window.openThemeSelector()">ğŸ¨</button>
                            </div>
                            <input type="text" id="musicInput" placeholder="ÅarkÄ± adÄ± - SanatÃ§Ä±"
                                class="music-input hidden">
                            <input type="text" id="musicUrlInput" placeholder="Spotify linki yapÄ±ÅŸtÄ±r"
                                class="music-url-input hidden">
                            <input type="text" id="venueInput" placeholder="Neredesin?" class="venue-input hidden">
                            <span id="locationStatus" class="location-badge hidden"></span>
                        </div>
                        <button id="addMomentBtn" class="primary-btn">
                            Kaydet âœ“
                        </button>
                    </div>
                </div>
            </div>

            <!-- My Recent Moments (Compact List) -->
            <div id="myRecentMoments" class="my-recent-moments hidden-mode">
                <h4>Son AnÄ±larÄ±m</h4>
                <div id="myMomentsList" class="compact-moments-list"></div>
            </div>

            <!-- Explore Search -->
            <div id="exploreSearchWrapper" class="explore-search-wrapper hidden-mode">
                <div class="search-input-container">
                    <input type="text" id="exploreSearchInput" placeholder="KullanÄ±cÄ± (@), Konum veya Etiket (#)..."
                        autocomplete="off">
                    <button id="clearSearchBtn" class="clear-search-btn hidden">âœ•</button>
                </div>
            </div>

            <!-- Timeline Feed -->
            <div id="timeline" class="timeline-feed">
                <!-- Moments will be injected here -->
            </div>

            <div id="dashboardFooter" class="dashboard-footer hidden-mode">
                Created with âœ¨ by <span class="designer-name">Serhat AykÄ±ÅŸ</span>
            </div>

            <!-- Profile View (Moved inside main) -->
            <div id="profileView" class="profile-page hidden-mode">
                <div id="profileContent">
                    <!-- Profile HTML injected here -->
                </div>
            </div>

            <!-- Notification View (Moved inside main) -->
            <div id="notiView" class="noti-page hidden-mode">
                <div class="noti-header">
                </div>
                <div id="notiContent" class="noti-list-content">
                    <div class="loading">YÃ¼kleniyor...</div>
                </div>
            </div>
        </main>

    </div>

    <!-- Custom Modal -->
    <div id="customModal" class="custom-modal hidden">
        <div class="modal-content">
            <h3 id="modalTitle">Bilgi</h3>
            <p id="modalMessage"></p>
            <div class="modal-actions">
                <button id="modalCancelBtn" class="modal-btn secondary">Ä°ptal</button>
                <button id="modalConfirmBtn" class="modal-btn primary">Tamam</button>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="modal-overlay hidden">
        <div class="modal-content edit-profile-modal">
            <h3>Profili DÃ¼zenle</h3>

            <div class="edit-photo-section">
                <div class="edit-avatar-preview" id="editAvatarPreview">ğŸ‘¤</div>
                <input type="file" id="editPhotoInput" accept="image/*" style="display:none">
                <button class="upload-photo-btn" onclick="document.getElementById('editPhotoInput').click()">ğŸ“· FotoÄŸraf
                    DeÄŸiÅŸtir</button>
            </div>

            <div class="edit-field">
                <label>GÃ¶rÃ¼nen Ad</label>
                <input type="text" id="editDisplayName" placeholder="GÃ¶rÃ¼nen adÄ±nÄ±z" maxlength="30">
            </div>

            <div class="edit-field">
                <label>KullanÄ±cÄ± AdÄ± (@)</label>
                <input type="text" id="editUsername" placeholder="kullanici_adi" maxlength="20">
                <small class="username-status" id="usernameStatus"></small>
            </div>

            <div class="edit-field">
                <label>Biyografi</label>
                <textarea id="editBio" placeholder="Kendinizi kÄ±saca tanÄ±tÄ±n..." maxlength="150" rows="3"></textarea>
            </div>

            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="window.closeEditProfileModal()">Ä°ptal</button>
                <button class="modal-btn save" onclick="window.saveProfileChanges()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Theme Picker Modal -->
    <div id="themePicker" class="theme-picker-modal hidden">
        <div class="theme-picker-content">
            <h3>AnÄ± TemasÄ± SeÃ§</h3>
            <div class="theme-grid">
                <button class="theme-option active" data-theme="minimal" onclick="window.selectTheme('minimal')">ğŸ“
                    Minimal</button>
                <button class="theme-option" data-theme="vintage" onclick="window.selectTheme('vintage')">ğŸ“œ
                    Vintage</button>
                <button class="theme-option" data-theme="polaroid" onclick="window.selectTheme('polaroid')">ğŸ“·
                    Polaroid</button>
                <button class="theme-option" data-theme="album" onclick="window.selectTheme('album')">ğŸ“” AlbÃ¼m</button>
                <button class="theme-option" data-theme="diary" onclick="window.selectTheme('diary')">ğŸ“– GÃ¼nlÃ¼k</button>
                <button class="theme-option" data-theme="travel" onclick="window.selectTheme('travel')">âœˆï¸
                    Seyahat</button>
                <button class="theme-option" data-theme="love" onclick="window.selectTheme('love')">â¤ï¸ AÅŸk</button>
                <button class="theme-option" data-theme="nature" onclick="window.selectTheme('nature')">ğŸŒ¿ DoÄŸa</button>
                <button class="theme-option" data-theme="party" onclick="window.selectTheme('party')">ğŸ‰ Parti</button>
                <button class="theme-option" data-theme="art" onclick="window.selectTheme('art')">ğŸ¨ Sanat</button>
            </div>
            <button class="theme-close-btn"
                onclick="document.getElementById('themePicker').classList.add('hidden')">Kapat</button>
        </div>
    </div>

    <!-- Collection Selector Modal -->
    <div id="collectionModal" class="modal-overlay hidden">
        <div class="modal-content collection-modal">
            <h3>ğŸ“ Koleksiyon SeÃ§</h3>
            <div id="collectionList" class="collection-list">
                <!-- Collections will be loaded here -->
            </div>
            <button class="create-collection-btn" onclick="window.showCreateCollectionModal()">+ Yeni
                Koleksiyon</button>
            <button class="modal-btn cancel" onclick="window.closeCollectionModal()">Kapat</button>
        </div>
    </div>

    <!-- Create Collection Modal -->
    <div id="createCollectionModal" class="modal-overlay hidden">
        <div class="modal-content create-collection-modal">
            <h3>Yeni Koleksiyon OluÅŸtur</h3>
            <div class="edit-field">
                <label>Emoji</label>
                <input type="text" id="collectionEmoji" placeholder="ğŸ“" maxlength="2" value="ğŸ“">
            </div>
            <div class="edit-field">
                <label>BaÅŸlÄ±k</label>
                <input type="text" id="collectionTitle" placeholder="Ã–rn: Bali Tatili 2026" maxlength="30">
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="window.closeCreateCollectionModal()">Ä°ptal</button>
                <button class="modal-btn save" onclick="window.saveNewCollection()">OluÅŸtur</button>
            </div>
        </div>
    </div>

    <!-- Edit Moment Modal (Premium) -->
    <div id="editMomentModal" class="modal-overlay hidden">
        <div class="modal-content edit-moment-modal">
            <h3>âœï¸ AnÄ±yÄ± DÃ¼zenle <span class="premium-badge">Premium</span></h3>
            <div class="edit-field">
                <label>Metin</label>
                <textarea id="editMomentText" placeholder="BugÃ¼n ne oldu?" rows="5"></textarea>
            </div>
            <div class="edit-field">
                <label>ManÅŸet</label>
                <input type="text" id="editStickerText" placeholder="Harika Bir GÃ¼n" maxlength="30">
            </div>
            <div class="edit-field">
                <label>ÅarkÄ± AdÄ±</label>
                <input type="text" id="editMusicText" placeholder="ÅarkÄ± - SanatÃ§Ä±">
            </div>
            <div class="edit-field">
                <label>Spotify/Deezer Linki</label>
                <input type="text" id="editMusicUrl" placeholder="https://...">
            </div>
            <div class="edit-field">
                <label>Tema</label>
                <button class="theme-select-btn" onclick="window.openThemeSelectorForEdit()">ğŸ¨ Tema SeÃ§</button>
                <span id="editThemeDisplay" style="margin-left: 10px; color: var(--text-secondary);">Minimal</span>
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="window.closeEditMomentModal()">Ä°ptal</button>
                <button class="modal-btn save" onclick="window.saveEditedMoment()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Photo Filter Modal -->
    <div id="photoFilterModal" class="modal hidden">
        <div class="modal-content photo-filter-content">
            <div class="filter-header">
                <h3>âœ¨ FotoÄŸraf Filtrele</h3>
                <button class="close-modal" onclick="window.closeFilterModal()">Ã—</button>
            </div>

            <!-- Carousel for Photo Preview -->
            <div class="filter-carousel-wrapper">
                <div id="filterCarousel" class="filter-carousel"></div>
                <button class="carousel-nav prev" onclick="window.prevFilterPhoto()">â®</button>
                <button class="carousel-nav next" onclick="window.nextFilterPhoto()">â¯</button>
            </div>

            <!-- Filter Selection Tabs -->
            <div class="filter-options-scroll">
                <div class="filter-option active" onclick="window.setFilter('none')" data-filter="none">
                    <div class="filter-preview none"></div>
                    <span>Normal</span>
                </div>
                <div class="filter-option" onclick="window.setFilter('retro')" data-filter="retro">
                    <div class="filter-preview retro"></div>
                    <span>Retro</span>
                </div>
                <div class="filter-option" onclick="window.setFilter('bw')" data-filter="bw">
                    <div class="filter-preview bw"></div>
                    <span>S&B</span>
                </div>
                <div class="filter-option" onclick="window.setFilter('warm')" data-filter="warm">
                    <div class="filter-preview warm"></div>
                    <span>SÄ±cak</span>
                </div>
                <div class="filter-option" onclick="window.setFilter('cool')" data-filter="cool">
                    <div class="filter-preview cool"></div>
                    <span>SoÄŸuk</span>
                </div>
                <div class="filter-option" onclick="window.setFilter('nostalgia')" data-filter="nostalgia">
                    <div class="filter-preview nostalgia"></div>
                    <span>Nostalji</span>
                </div>
            </div>

            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="window.closeFilterModal()">VazgeÃ§</button>
                <button class="modal-btn save" onclick="window.applyFiltersToAll()">TÃ¼mÃ¼ne Uygula</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>


    <script src="firebase-config.js"></script>
    <script src="cloudinary-service.js"></script>
    <script src="firebase-service.js"></script>
    <script src="app.js"></script>
</body>

</html>